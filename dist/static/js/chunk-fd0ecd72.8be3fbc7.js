(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd0ecd72"],{"49a9":function(e,t,r){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-component"},[t("el-pagination",{attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper",total:e.total,"current-page":e.page.currentPage,"page-size":e.page.pageSize,"page-sizes":[10,50,100]},on:{"update:currentPage":function(t){return e.$set(e.page,"currentPage",t)},"update:current-page":function(t){return e.$set(e.page,"currentPage",t)},"update:pageSize":function(t){return e.$set(e.page,"pageSize",t)},"update:page-size":function(t){return e.$set(e.page,"pageSize",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},o=[],n={props:{total:{required:!0},page:{required:!0}},methods:{handleSizeChange:function(e){this.page.pageSize=e,this.$emit("pageChange",this.page)},handleCurrentChange:function(e){this.page.currentPage=e,this.$emit("pageChange",this.page)}}},i=n,l=(r("be9c"),r("2877")),c=Object(l["a"])(i,a,o,!1,null,null,null);t["a"]=c.exports},"5bf1":function(e,t,r){"use strict";r("80c9")},"80c9":function(e,t,r){},"96da":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{ref:"box",staticClass:"service"},[t("el-form",{attrs:{inline:""},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[t("el-form-item",{attrs:{label:"员工:",prop:"employeeName"}},[t("el-select",{attrs:{palceholder:"请选择员工",clearable:""},model:{value:e.searchForm.employeeName,callback:function(t){e.$set(e.searchForm,"employeeName",t)},expression:"searchForm.employeeName"}},e._l(e.empList,(function(e,r){return t("el-option",{key:r,attrs:{label:e.readName,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"服务类型:",prop:"categoryName"}},[t("el-select",{attrs:{palceholder:"请选择服务类型",clearable:""},model:{value:e.searchForm.categoryName,callback:function(t){e.$set(e.searchForm,"categoryName",t)},expression:"searchForm.categoryName"}},e._l(e.categoryList,(function(e,r){return t("el-option",{key:r,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"时间："}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"服务开始时间","end-placeholder":"服务结束时间"},model:{value:e.createTimeRange,callback:function(t){e.createTimeRange=t},expression:"createTimeRange"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getServiceList()}}},[e._v("查询")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.$refs.addDialog.open(null)}}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.$refs.historyService.open()}}},[e._v("查询历史服务")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",height:e.tableHeight,data:e.serviceList,"element-loading-text":"拼命加载中"}},[t("el-table-column",{attrs:{label:"序号",type:"index",width:"55"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(r.$index+1))])]}}])}),t("el-table-column",{attrs:{label:"员工姓名",prop:"employeeName"}}),t("el-table-column",{attrs:{label:"服务类型",prop:"categoryName"}}),t("el-table-column",{attrs:{label:"房号",prop:"roomNumber"}}),t("el-table-column",{attrs:{label:"服务时间",prop:"createTime"}}),t("el-table-column",{attrs:{label:"备注",prop:"remark"}}),t("el-table-column",{attrs:{label:"操作",prop:"operation",width:"200"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.$refs.updateDialog.open(r.row)}}},[e._v("修改")]),t("el-button",{attrs:{type:"text",icon:"el-icon-check"},on:{click:function(t){return e.finishService(r.row)}}},[e._v("服务完成")]),t("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(r.row)}}},[e._v("删除")])]}}])})],1),t("add-dialog",{ref:"addDialog",attrs:{title:"新增"},on:{confirmData:function(t){return e.addservice(t)}}}),t("update-dialog",{ref:"updateDialog",attrs:{title:"修改"},on:{confirmData:function(t){return e.updateservice(t)}}}),t("history-service",{ref:"historyService",attrs:{title:"历史服务"}}),t("page-component",{attrs:{total:e.total,page:{currentPage:e.searchForm.page,pageSize:e.searchForm.size}},on:{pageChange:function(t){return e.handlePageChange(t)}}})],1)},o=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("ade3")),i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"empAdd"}},[t("el-dialog",{attrs:{title:e.title,visible:e.visible,top:"8rem","lock-scroll":!1,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[t("el-form",{ref:"serviceForm",attrs:{model:e.item,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"房号:",prop:"roomNumber"}},[t("el-input",{attrs:{palceholder:"请输入房号",clearable:""},model:{value:e.item.roomNumber,callback:function(t){e.$set(e.item,"roomNumber",t)},expression:"item.roomNumber"}})],1),t("el-form-item",{attrs:{label:"员工:",prop:"employeeName"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{palceholder:"请选择员工",clearable:""},model:{value:e.item.employeeName,callback:function(t){e.$set(e.item,"employeeName",t)},expression:"item.employeeName"}},e._l(e.empList,(function(e,r){return t("el-option",{key:r,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"服务类型:",prop:"categoryName"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{palceholder:"请选择服务类型",clearable:""},model:{value:e.item.categoryName,callback:function(t){e.$set(e.item,"categoryName",t)},expression:"item.categoryName"}},e._l(e.categoryList,(function(e,r){return t("el-option",{key:r,attrs:{label:e.categoryName,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[t("el-input",{attrs:{type:"textarea",rows:2,resize:"none",maxlength:"200","show-word-limit":"",palceholder:"请输入备注"},model:{value:e.item.remark,callback:function(t){e.$set(e.item,"remark",t)},expression:"item.remark"}})],1)],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("serviceForm")}}},[e._v("提交")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.resetForm("serviceForm")}}},[e._v("取消")])],1)],1)],1)},l=[],c=r("ef75"),s={props:{title:String,default:"title"},data:function(){return{visible:!1,uptoken:{key:""},empList:[],categoryList:["前台接待","客房服务","餐饮服务","洗衣/干洗服务","行李及行程安排服务","礼宾服务"],item:{roomNumber:"",employeeName:"",categoryName:"",remark:""},rules:{roomNumber:[{required:!0,message:"请输入",trigger:"blur"}],employeeName:[{required:!0,message:"请选择",trigger:"change"}],categoryName:[{required:!0,message:"请选择",trigger:"change"}]}}},mounted:function(){this.getempList()},methods:{open:function(e){this.visible=!0,this.item=null===e||void 0===e?{}:e},getempList:function(){var e=this;Object(c["b"])({number:"",readName:"",page:1,limit:50}).then((function(t){e.empList=e.handleEmp(t.data.data)}))},handleEmp:function(e){for(var t=e,r=[],a=0;a<t.length;a++)r.push(t[a].readName);return r},submitForm:function(){var e=this;this.$refs.serviceForm.validate((function(t){t&&e.$confirm("确认保存吗？","是否保存",{cancelButtonText:"取消",confirmButtonText:"确认",lockScroll:!1,type:"warning"}).then((function(){e.$emit("confirmData",e.item),e.resetForm("serviceForm")}))}))},resetForm:function(e){var t=this;this.$nextTick((function(){t.$refs.serviceForm.clearValidate()})),this.item={},this.fileFlag=!1,this.fileUploadPercent=0,this.visible=!1}}},u=s,m=r("2877"),p=Object(m["a"])(u,i,l,!1,null,null,null),g=p.exports,f=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"currentServiceAdd"}},[t("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"80%","lock-scroll":!1,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[t("el-form",{attrs:{model:e.searchForm,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{label:"员工姓名:"}},[t("el-input",{attrs:{placeholder:"员工姓名",clearable:""},model:{value:e.searchForm.employeeName,callback:function(t){e.$set(e.searchForm,"employeeName",t)},expression:"searchForm.employeeName"}})],1)],1),t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{label:"服务类型:",prop:"categoryName"}},[t("el-select",{attrs:{palceholder:"请选择服务类型",clearable:""},model:{value:e.searchForm.categoryName,callback:function(t){e.$set(e.searchForm,"categoryName",t)},expression:"searchForm.categoryName"}},e._l(e.categoryList,(function(e,r){return t("el-option",{key:r,attrs:{label:e,value:e}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"服务时间："}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"起始时间","end-placeholder":"结束时间"},model:{value:e.createTimeRange,callback:function(t){e.createTimeRange=t},expression:"createTimeRange"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getHistoryList()}}},[e._v("查询")])],1)],1)],1)],1),t("el-table",{attrs:{border:"",height:"300",data:e.currentServiceInfo,"element-loading-text":"拼命加载中"}},[t("el-table-column",{attrs:{label:"住客信息"}},[t("el-table-column",{attrs:{label:"房号",prop:"roomNumber"}}),t("el-table-column",{attrs:{label:"员工",prop:"employeeName"}}),t("el-table-column",{attrs:{label:"服务类型",prop:"categoryName"}}),t("el-table-column",{attrs:{label:"开始时间",prop:"serviceStartTime"}}),t("el-table-column",{attrs:{label:"结束时间",prop:"serviceEndTime"}})],1)],1),t("page-component",{attrs:{total:e.total,page:{currentPage:e.searchForm.page,pageSize:e.searchForm.size}},on:{pageChange:function(t){return e.handlePageChange(t)}}}),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)},d=[],b=r("b775"),h=function(e){return Object(b["a"])({url:"/roomService/list",method:"get",params:e})},y=function(e){return Object(b["a"])({url:"/roomService/listHistory",method:"get",params:e})},v=r("49a9");function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S={components:{PageComponent:v["a"]},props:{title:String,default:"title"},data:function(){return{visible:!1,searchForm:{employeeName:"",categoryName:"",page:1,size:50},total:0,createTimeRange:"",currentServiceInfo:[],categoryList:["前台接待","客房服务","餐饮服务","洗衣/干洗服务","行李及行程安排服务","礼宾服务"],serviceData:{}}},mounted:function(){this.getHistoryList()},methods:{open:function(){this.visible=!0},getHistoryList:function(){var e=this;y(this.searchForm).then((function(t){0==t.data.code&&(e.total=t.data.totalRows,e.currentServiceInfo=t.data.data)}))},handlePageChange:function(e){this.searchForm=N(N({},this.searchForm),{},{page:e.currentPage,size:e.pageSize}),this.getServiceHistoryList()},cancel:function(){this.visible=!1}}},O=S,w=Object(m["a"])(O,f,d,!1,null,null,null),j=w.exports;function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x={components:{PageComponent:v["a"],AddDialog:g,updateDialog:g,historyService:j},data:function(){return{tableHeight:0,loading:!0,empList:[],searchForm:{employeeName:"",categoryName:"",page:1,size:50},createTimeRange:"",serviceList:[],categoryList:["前台接待","客房服务","餐饮服务","洗衣/干洗服务","行李及行程安排服务","礼宾服务"],total:0,serviceData:{}}},mounted:function(){this.getServiceList(),this.getempList(),this.getTableHeight()},methods:{getTableHeight:function(){var e=this.$refs.box.offsetHeight;this.tableHeight=e-100},getempList:function(){var e=this;Object(c["b"])({number:"",readName:"",page:1,limit:50}).then((function(t){console.log(t),e.empList=t.data.data}))},handlePageChange:function(e){this.searchForm=P(P({},this.searchForm),{},{page:e.currentPage,size:e.pageSize}),this.getServiceList()},getServiceList:function(){var e=this;h(this.searchForm).then((function(t){e.loading=!1,e.serviceList=t.data.data,e.total=t.data.total}))},addservice:function(){this.$message({type:"success",message:"新增客房服务成功"}),this.getServiceList()},updateservice:function(){this.$message({type:"success",message:"修改客房类型成功"}),this.getServiceList()},finishService:function(){this.$message({type:"success",message:"该服务已完成"})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该数据，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(r){t.serviceList=t.serviceList.filter((function(t){return t.id!==e.id})),t.$message({type:"success",message:"删除成功"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},L=x,$=(r("5bf1"),Object(m["a"])(L,a,o,!1,null,"119c008a",null));t["default"]=$.exports},"96e2":function(e,t,r){},ade3:function(e,t,r){"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function n(e){var t=o(e,"string");return"symbol"===a(t)?t:String(t)}function i(e,t,r){return t=n(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return i}))},b775:function(e,t,r){"use strict";var a=r("bc3a"),o=r.n(a),n=o.a.create({baseURL:"",withCredentials:!1,timeout:5e3});n.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),n.interceptors.response.use((function(e){var t=e.data;return t&&t.hasOwnProperty("code")?e:Promise.reject("请求出错")}),(function(e){return Promise.reject(e)})),t["a"]=n},be9c:function(e,t,r){"use strict";r("96e2")},ef75:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return n}));var a=r("b775"),o=function(e){return Object(a["a"])({url:"/employee/list",method:"get",params:e})},n=function(e){return Object(a["a"])({url:"/employee/getPosition",method:"get",params:e})}}}]);